<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">

    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Mitr:wght@300" rel="stylesheet"> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.5.0/sdk.js"></script>
    <!-- <script src="../js/index.js"></script> -->

    <title>JUK JUK</title>
</head>

<body>

    <div class="container">

        <div style="background-color: #FFDB01; height:2px; width:80%; padding-top: 0px; border: none; position: -webkit-sticky;
    position: sticky;  margin: auto">
        </div>

    </div>
    <div class="container" style="padding-top:15px;">
        <div class="container mt=20">

            <div class="container mt=20">
                <div class="row">
                    <div class="col-1.5">
                        <h1 id="topic" style="text-align: left;">สรุปรายการ</h1>
                    </div>

                </div>
                <div class="row">
                    <p id="topic-second">ตามสั่งป้าแจ๋วตึก A</p>
                </div>
                <div class="row">
                    <p id="line_name" style="font-size: 16px;">By jaewjaew</p>
                </div>
            </div>
        </div>

        <ul class="list-group list-group-flush" id="cookBook">
            <!-- <li class="list-group-item">

                <div class="row">
                    <div class="col-1.5">
                        <img src="../images/db/กะเพราหมูกรอบ.jpg" class="rounded food" id="menuImage"
                            alt="กะเพราหมูกรอบ">
                    </div>
                    <div class="col">
                        <p id="menu">กะเพราหมูกรอบ</p>
                    </div>
                    <div class="col-1">

                        <p>x</p>
                    </div>
                    <div class="col-1.5">
                        <p>50 ฿</p>
                    </div>
                </div>
            </li> -->
        </ul>

        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <div class="row">
                    <div class="col-6">
                        <!-- <p id="menu">รายการจัดส่งทันที</p> -->
                    </div>
                    <div class="col-4">
                        <p style="font-size: 20px; text-align: right;">ยอดรวม</p>
                    </div>
                    <div class="col-2">
                        <p style="font-size: 22px; text-align: right;" id="price">120 ฿</p>
                    </div>
                </div>

            </li>
        </ul>




    </div>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-3">
                    <button type="button" class="btn btn-primary" id="footerBackBttn" onclick="goBack();">
                        กลับ </button>
                </div>
                <div class="col-9">
                    <button type="button" class="btn btn-primary" id="footerNextBttn"
                        onclick="document.location='./3.0_orderPayment.html'">ชำระเงิน</button>
                </div>
            </div>
        </div>
    </footer>


    <script>

        var queryData = localStorage.getItem("queryData")
        var listOrder = localStorage.getItem("listOrder")
        var listNumber = JSON.parse(localStorage.getItem("listNumber"))
        var products = JSON.parse(localStorage.getItem("products"))


        console.log(queryData)
        console.log("hello world1")
        console.log(queryData.data)
        console.log("hello world2")
        console.log(localStorage.getItem("products"))
        console.log("hello worlda")
        console.log(products)
        console.log("hello worldb")
        console.log(products[0])

        queryData = JSON.parse(queryData)

        document.getElementById("topic-second").innerHTML = localStorage.getItem("restaurantName")
        document.getElementById("price").innerHTML = '฿' + localStorage.getItem("sumCost");

        // var products = queryData.data.data[0].products
        var sizeMenu = products.length

        // console.log(products)

        for (var i = 0; i < sizeMenu; i++) {

            var unique_id = String(products[i].menuId)

            if (listOrder.includes(unique_id)) {

                menuRow = document.createElement("li")
                menuRow.className = "list-group-item";
                menuRow.innerHTML = `
                <div class="row">
                    <div class="col-1.5">
                        <img src="${products[i].image}" class="rounded food" id="menuImage"
                            alt="${products[i].name}">
    </div>
                        <div class="col">
                            <p id="menu">${products[i].name}</p>
                        </div>
                        <div class="col-1">

                            <p>x</p>
                        </div>
                        <div class="col-1.5">
                            <p>${listNumber[i]}</p>
                        </div>
                    </div>
    `;

                document.getElementById("cookBook").append(menuRow)
            }
            // document.getElementById("numberAdjust-" + unique_id).style.display = "none"
        }

        // console.log(localStorage.getItem("locationHref"))

        function goBack() {
            // window.history.back();
            // document.location='../index.html'
            let location = localStorage.getItem("locationHref")
            document.location = location
        }


        // async function main() {

        //     await liff.init({ liffId: "1655215015-V58PdOrL" })

        // }

        async function main() {
            await liff.init({ liffId: localStorage.getItem("liffId") })

        }

        main()
    </script>

</body>

</html>